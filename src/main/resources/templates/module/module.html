<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
	<!-- 设置ico标签栏logo图标 -->
    <link rel="icon" href="img/logo/blueWhaleLogo1.5.png"/>
    <title>Blue Whale</title>

    <head th:include="include/includebase" />
    <!-- HTML5 shim 和 Respond.js 是为了让 IE8 支持 HTML5 元素和媒体查询（media queries）功能 -->
    <!-- 警告：通过 file:// 协议（就是直接将 html 页面拖拽到浏览器中）访问页面时 Respond.js 不起作用 -->
    <!--[if lt IE 9]>
      <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
	<div class="site-wrapper">

      <div class="site-wrapper-inner">

        <div class="cover-container">

          <div class="masthead clearfix" >
            <div class="inner">
              <h2 class="masthead-brand">Blue Whale</h2>
              <nav>
                <ul class="nav masthead-nav">
                  <li><a href="/bluewhale">Home</a></li>
                  <li class="dropdown" >
		              <a href="/bluewhale/module/excelWR" class="dropdown-toggle" data-toggle="dropdown">
		                  Features
		                  <b class="caret"></b>
		              </a>
		              <ul class="dropdown-menu" >
		                  <li><a href="/bluewhale/module/excelWR">日报系统</a></li>
		                  <li class="divider"></li>
		                  <li><a href="#">分离的链接</a></li>
		                  <li class="divider"></li>
		                  <li><a href="#">另一个分离的链接</a></li>
		              </ul>
		          </li>
                  <li><a href="#">Contact</a></li>
                </ul>
              </nav>
            </div>
          </div>

<!--           <div class="inner cover" style="margin-bottom: 0">
          	<form action="/bluewhale/module/upload" method="post" entype="multipart/form-data">
            	<input id="input-id" name="input2" type="file" class="file" multiple="multiple" lang="zh">
            	<input id="input-id" name="file" multiple type="file" data-show-caption="true">
            </form>
          </div> -->
          
          <div class="inner cover" style="margin-bottom: 0">
            <input id="input-id" name="file" multiple type="file" data-show-caption="true">
			<hr />
			<h2>整合周报</h2>
			<div>
				<input type="text" placeholder="所属项目组" id="conformTeam" style="color: #000"/>
				<input type="text" placeholder="开始日期" id="conformStart" style="color: #000"/>
                <input type="text" placeholder="终止日期" id="conformEnd" style="color: #000"/>
                <input id="conform" type="submit" class="btn btn-lg btn-default" value="整合"/>
			</div>
				
			<hr />
			<h2>下载周报</h2>
			<form action="/bluewhale/module/download" method="post">
				<input type="text" placeholder="所属项目组" name="team" style="color: #000"/>
				<input type="text" placeholder="开始日期" name="start" style="color: #000"/>
                <input type="text" placeholder="终止日期" name="end" style="color: #000"/>
                <input id="download" type="submit" class="btn btn-lg btn-default" value="下载"/>
			</form>
          </div>

          <div class="mastfoot" >
            
            <div class="inner">
              <hr />
              <p> ©2019-2020 BlueWhale.Inc All Rights Reserved</p>
            </div>
          </div>

        </div>

      </div>

    </div>
	
<script>

	$('#conform').click(function() {
		   $.ajax ({
			   type: 'POST',
			   url: '/bluewhale/module/conform',
			   data: {
				   team: $('#conformTeam').val(),
				   start: $('#conformStart').val(),
				   end: $('#conformEnd').val()
			   },
			   dataType: 'json',
			   async: false,
			   success: function(data){
				   var flag = eval(data);
				   if("200"==flag) {
					   console.log("整合成功");
				   } else {
					   console.log("整合失败");
				   }
			   }
			   
		   });
	})
   $(function () {
       initFileInput("input-id");
   })

   function initFileInput(ctrlName) {
       var control = $('#' + ctrlName);
       control.fileinput({
           language: 'zh', //设置语言
           uploadUrl: "/bluewhale/module/upload", //上传的地址
           allowedFileExtensions: ['jpg', 'gif', 'png','doc','docx','pdf','xls','xlsx','txt'],//接收的文件后缀
           maxFilesNum : 5,//上传最大的文件数量
           //uploadExtraData:{"id": 1, "fileName":'123.mp3'},
           uploadAsync: true, //默认异步上传
           showUpload: true, //是否显示上传按钮
           showRemove : true, //显示移除按钮
           showPreview : false, //是否显示预览
           showCaption: false,//是否显示标题
           browseClass: "btn btn-primary", //按钮样式
           //dropZoneEnabled: true,//是否显示拖拽区域
           //minImageWidth: 50, //图片的最小宽度
           //minImageHeight: 50,//图片的最小高度
           //maxImageWidth: 1000,//图片的最大宽度
           //maxImageHeight: 1000,//图片的最大高度
           maxFileSize: 0,//单位为kb，如果为0表示不限制文件大小
           //minFileCount: 0,
           maxFileCount: 5, //表示允许同时上传的最大文件个数
           enctype: 'multipart/form-data',
           validateInitialCount:true,
           previewFileIcon: "<i class='glyphicon glyphicon-king'></i>",
           msgFilesTooMany: "选择上传的文件数量({n}) 超过允许的最大数值{m}！",

       }).on('filepreupload', function(event, data, previewId, index) {     //上传中
           var form = data.form, files = data.files, extra = data.extra,
           response = data.response, reader = data.reader;
           console.log('文件正在上传');
       }).on("fileuploaded", function (event, data, previewId, index) {    //一个文件上传成功
           console.log('文件上传成功！'+data.id);

       }).on('fileerror', function(event, data, msg) {  //一个文件上传失败
           console.log('文件上传失败！'+data.id);
       })
	}
</script>

</body>
</html>